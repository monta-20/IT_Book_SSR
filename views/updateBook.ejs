<%- include('parts/top.ejs') %>
<br>
<br>

<div class="container">
    <h2 class="text-center mb-4">Update Book Details</h2>
    <form method="POST" action="/mybooks/update" enctype="multipart/form-data">
        <div class="form-group">
            <label for="title">Book Title</label>
            <input type="text" id="title" class="form-control" name="title" value="<%= bookUpdate.title %>" required>
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" class="form-control" name="description" rows="3" required>
                <%= bookUpdate.description %>
            </textarea>
        </div>

        <input type="hidden" name="bookId" value="<%= bookUpdate._id %>">

        <div class="form-group">
            <label for="author">Author</label>
            <input type="text" id="author" class="form-control" name="author" value="<%= bookUpdate.author %>" required>
        </div>

        <div class="form-group">
            <label for="price">Price</label>
            <input type="number" id="price" class="form-control" name="price" value="<%= bookUpdate.price %>" step="0.01" min="0" required>
        </div>

        <div class="form-group">
            <label>Current Image</label><br>
            <img src="/uploads/<%= bookUpdate.image %>" class="img-fluid mb-2" width="100" height="100" alt="<%= bookUpdate.title %>">
        </div>

        <input type="hidden" name="oldImage" value="<%= bookUpdate.image %>">

        <div class="form-group">
            <label for="image">Change Image (optional)</label>
            <input type="file" id="image" name="image" class="form-control">
        </div>

        <% if (Smessage) { %>
            <div class="alert alert-success">
                <%= Smessage %>
            </div>
        <% } %>

        <% if (Emessage) { %>
            <div class="alert alert-danger">
                <%= Emessage %>
            </div>
        <% } %>

        <button type="submit" class="btn btn-primary">Update</button>
    </form>
</div>

<%- include('parts/bottom.ejs') %>
